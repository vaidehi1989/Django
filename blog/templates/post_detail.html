{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %}
My Blog - {{post.title }}
{% endblock %}
{% block content %}
<div class="content container">
    <div class="row">
        <div class="card col-md-12 border-right-0 border-left-0 border-top-0 border-bottom-0">
            <div class="card-header">
                <h2>{{ post.title }}</h2>
                <div class="date">
                    {{ post.published_date }}
                </div>
                <br>
                {% if user.is_authenticated and user == post.author %}
                <form action="{% url 'post_delete' post.pk %}" method="post">{% csrf_token %}
                    <a href="{% url 'post_edit' post.pk %}" class="btn btn-outline-primary btn-sm">Edit</a> | <input
                            type="submit" value="Delete" class="btn btn-outline-primary btn-sm">
                </form>
                {% endif %}
            </div>
            <div>
                <p>{{ post.text|linebreaksbr }}</p>
            </div>
            <div class="card-footer">
                {% for comment in post.comments.all %}
                <p>
                    <span class="font-weight-bold">{{ comment.author }}: </span>
                    {{ comment }}
                </p>
                {% endfor %}
                {% if user.is_authenticated %}
                <form method="post">{% csrf_token %}
                    {{ form|crispy }}
                    <button type="submit" class="btn btn-sm">Submit</button>
                </form>
                {%else%}
                <a href="{% url 'login' %}">Login</a> to add comments
                {% endif%}
            </div>
        </div>
    </div>
</div>
<br><br>
{% endblock %}
